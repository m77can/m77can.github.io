<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> crontab 笔记 · m77can's blog</title><meta name="description" content="crontab 笔记 - m77can"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://m77can.github.io/atom.xml" title="m77can's blog"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="/tags/" target="_self" class="nav-list-link">TAG</a></li><li class="nav-list-item"><a href="https://github.com/m77can" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">crontab 笔记</h1><div></div><div class="post-info">Sep 28, 2017</div><div class="post-content"><h2 id="基本"><a href="#基本" class="headerlink" title="基本"></a>基本</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">minute   hour   day   month   week   <span class="built_in">command</span></span><br><span class="line"><span class="comment"># For details see man 4 crontabs</span></span><br><span class="line"><span class="comment"># Example of job definition:</span></span><br><span class="line">.---------------------------------- minute (0 - 59) 表示分钟</span><br><span class="line">|  .------------------------------- hour (0 - 23)   表示小时</span><br><span class="line">|  |  .---------------------------- day of month (1 - 31)   表示日期</span><br><span class="line">|  |  |  .------------------------- month (1 - 12) OR jan,feb,mar,apr ... 表示月份</span><br><span class="line">|  |  |  |  .---------------------- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat  表示星期（0 或 7 表示星期天）</span><br><span class="line">|  |  |  |  |  .------------------- username  以哪个用户来执行 </span><br><span class="line">|  |  |  |  |  |            .------ <span class="built_in">command</span>  要执行的命令，可以是系统命令，也可以是自己编写的脚本文件</span><br><span class="line">|  |  |  |  |  |            |</span><br><span class="line">*  *  *  *  * user-name  <span class="built_in">command</span> to be executed</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># */5 能被5整除</span></span><br><span class="line"><span class="comment"># 1,2,3 表示1,2,3</span></span><br><span class="line"><span class="comment"># 1-3   表示1 到 3</span></span><br></pre></td></tr></table></figure>
<h2 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用 文本编辑器编辑</span></span><br><span class="line">crontab -e </span><br><span class="line"></span><br><span class="line"><span class="comment"># 列表</span></span><br><span class="line">crontab -l</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定用户</span></span><br><span class="line">crontab -u username</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="run-parts"><a href="#run-parts" class="headerlink" title="run-parts"></a>run-parts</h2><p>run-parts 执行目录下的所有的脚本<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mkdir /etc/cron.min</span></span><br><span class="line">*/5 * * * * root run-parts /etc/cron.min</span><br><span class="line"><span class="comment"># 每5分钟 root 运行 /etc/cron.min 下的所有脚本</span></span><br></pre></td></tr></table></figure></p>
<h2 id="特殊"><a href="#特殊" class="headerlink" title="特殊"></a>特殊</h2><ul>
<li>@yearly (0 0 1 1 *)</li>
<li>@monthly (0 0 1 <em> </em>)</li>
<li>@weekly (0 0 1 * mon)</li>
<li>@daily (0 0 <em> </em> *)</li>
<li>@hourly (0 <em> </em> <em> </em>)</li>
<li>@reboot  每次重启</li>
</ul>
<h2 id="examples"><a href="#examples" class="headerlink" title="examples"></a>examples</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 编辑指定用户</span></span><br><span class="line">crontab -u username -e</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定用户列表</span></span><br><span class="line">crontab -u username -l</span><br><span class="line"></span><br><span class="line"><span class="comment"># 每天 5、17 点 执行脚本</span></span><br><span class="line">0 5,17 * * * /scripts/script.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 每分钟执行</span></span><br><span class="line">* * * * *  /scripts/script.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 每10分钟执行</span></span><br><span class="line">*/10 * * * * /scripts/monitor.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 每年执行</span></span><br><span class="line">@yearly /scripts/script.sh</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 每月最后一天执行</span></span><br><span class="line">30 23 28-31 * * [[ <span class="string">"<span class="variable">$(date --date=tomorrow +\%d)</span>"</span> == <span class="string">"01"</span> ]] &amp;&amp; /scripts/script.sh</span><br></pre></td></tr></table></figure></div></article></div></main><footer><div class="paginator"><a href="/2017/10/11/maven/" class="prev">PREV</a><a href="/2017/06/18/macbook-tools/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2019 <a href="http://m77can.github.io">m77can</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>